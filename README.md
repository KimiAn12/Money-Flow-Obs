# Money Flow Observatory - Project Summary

## Overview

Money Flow Observatory is a financial data visualization application that displays real-time capital flow metrics across global markets and asset classes. The project uses a **local backend architecture** where a Python script runs daily to fetch data from financial APIs, processes it, and saves it as static JSON files that are served by the frontend.

## Architecture

```
┌─────────────────────────────────────────────────────────────┐
│                    Local Computer (Backend)                  │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  Daily Script (5 PM) - scripts/update_data.py       │  │
│  │  • Fetches from Alpha Vantage API                    │  │
│  │  • Fetches from FRED API                             │  │
│  │  • Processes and transforms data                     │  │
│  │  • Saves JSON files to frontend/public/data/         │  │
│  │  • Commits and pushes to GitHub                      │  │
│  └──────────────────────────────────────────────────────┘  │
└───────────────────────────┬─────────────────────────────────┘
                            │
                            │ Git Push
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                    GitHub Repository                         │
│                                                              │
│  frontend/public/data/                                      │
│  ├── global-flow.json      (Updated daily)                  │
│  └── industry-flow.json    (Updated daily)                  │
└───────────────────────────┬─────────────────────────────────┘
                            │
                            │ Auto-deploy
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                    Vercel (Frontend)                         │
│                                                              │
│  React App                                                   │
│  • Reads from /data/global-flow.json                        │
│  • Reads from /data/industry-flow.json                      │
│  • No backend API calls needed                              │
│  • Serves static files via CDN                              │
└─────────────────────────────────────────────────────────────┘
```

## Project Structure

```
MoneyFlowProject/
├── frontend/                    # React frontend application
│   ├── public/
│   │   └── data/               # JSON data files (generated by script)
│   │       ├── global-flow.json
│   │       └── industry-flow.json
│   ├── src/
│   │   ├── pages/
│   │   │   ├── GlobalMarkets.tsx    # Global market flow visualization
│   │   │   ├── IndustryFlow.tsx     # Industry flow visualization
│   │   │   ├── Hero.tsx             # Landing page
│   │   │   └── Index.tsx            # Main page
│   │   ├── components/
│   │   │   ├── GlobalFlowMap.tsx    # Global flow map component
│   │   │   ├── NetworkGraph.tsx     # Network graph component
│   │   │   └── ...                  # Other UI components
│   │   ├── data/                    # Fallback data (src/data/)
│   │   │   ├── global-flow.json
│   │   │   └── industry-flow.json
│   │   └── types/                   # TypeScript type definitions
│   └── package.json
│
├── backend/                     # FastAPI backend (optional, not used in production)
│   ├── app/
│   │   ├── main.py             # FastAPI application
│   │   ├── api/                # API endpoints
│   │   ├── core/               # Core business logic
│   │   └── models/             # Data models
│   └── requirements.txt
│
├── scripts/                     # Data update scripts
│   ├── update_data.py          # Main data update script
│   ├── requirements.txt        # Python dependencies
│   └── README.md               # Script documentation
│
└── logs/                       # Log files (gitignored)
    └── update_data.log         # Script execution logs
```

## How It Works

### 1. Data Collection (Daily at 5 PM)

The `scripts/update_data.py` script runs daily on your local computer:

1. **Fetches Data from APIs**:
   - **Alpha Vantage API**: Stock prices, crypto prices
   - **FRED API**: Economic indicators, bond yields, currency exchange rates

2. **Processes Data**:
   - Transforms raw API data into frontend-compatible format
   - Calculates metrics (correlations, flow intensity, etc.)
   - Generates mock data as fallback if APIs fail

3. **Saves JSON Files**:
   - `frontend/public/data/global-flow.json` - Global market flow data
   - `frontend/public/data/industry-flow.json` - Industry flow data

4. **Commits to GitHub**:
   - Only commits if data has changed
   - Pushes changes to GitHub repository
   - Vercel automatically deploys updated files

### 2. Frontend (Vercel)

The React frontend application:

1. **Reads Static Files**:
   - Fetches data from `/data/global-flow.json`
   - Fetches data from `/data/industry-flow.json`
   - No backend API calls needed

2. **Displays Visualizations**:
   - **Global Markets**: Shows capital flows between regions (USA, China, Europe, Japan, India)
   - **Industry Flow**: Shows capital flows between asset classes (Stocks, Bonds, Commodities, Crypto, Cash)

3. **Features**:
   - Interactive maps and graphs
   - Real-time data visualization
   - Time range selection (1D, 1W, 1M, 3M, 1Y)
   - Asset type filtering (Equities, Bonds, Currency)

## Frontend-Backend Connection

### Current Architecture (Static Files)

**Frontend → Static Files (No Backend)**

```
Frontend (React)
    │
    ├─→ /data/global-flow.json (Static file)
    │   └─→ Served by Vercel CDN
    │
    └─→ /data/industry-flow.json (Static file)
        └─→ Served by Vercel CDN
```


## Data Flow

### Daily Update Flow

```
1. Local Computer (5 PM daily)
   │
   ├─→ Script runs: scripts/update_data.py
   │
   ├─→ Fetches from APIs:
   │   ├─→ Alpha Vantage API
   │   └─→ FRED API
   │
   ├─→ Processes data:
   │   ├─→ Transforms to JSON
   │   ├─→ Calculates metrics
   │   └─→ Generates visualizations data
   │
   ├─→ Saves files:
   │   ├─→ frontend/public/data/global-flow.json
   │   └─→ frontend/public/data/industry-flow.json
   │
   ├─→ Commits to Git:
   │   ├─→ git add frontend/public/data/*.json
   │   ├─→ git commit -m "Update data YYYY-MM-DD"
   │   └─→ git push
   │
   └─→ GitHub → Vercel (Auto-deploy)
       └─→ Frontend serves updated files
```

### Frontend Data Flow

```
1. User visits website
   │
   ├─→ React app loads
   │
   ├─→ Fetches data:
   │   ├─→ fetch("/data/global-flow.json")
   │   └─→ fetch("/data/industry-flow.json")
   │
   ├─→ Processes data:
   │   ├─→ Parses JSON
   │   ├─→ Updates state
   │   └─→ Renders visualizations
   │
   └─→ User sees updated data
```


## Features

### Global Markets
- **Regions**: USA, China, Europe, Japan, India
- **Metrics**: Stock indices, bond yields, currency strength
- **Flows**: Capital flows between regions
- **Filters**: Asset type (Equities, Bonds, Currency)

### Industry Flow
- **Asset Classes**: Stocks, Bonds, Commodities, Crypto, Cash
- **Metrics**: Market cap, net flow percentage, flow intensity
- **Correlations**: Asset class correlations
- **Visualization**: Network graph
